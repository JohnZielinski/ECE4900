#include <Servo.h>

Servo servo;
int pos =0;
int laser_din=2; //set input data pin
int count;
void Dispense(int numpills)
{for(count=0; count<=numpills; count+=1)
{
 while(digitalRead(laser_din)==HIGH)
  {
  for (pos = 0; pos<= 180; pos +=1)
  {
     servo.write(pos);
     delay(10);
  }
  for (pos =180; pos >= 0; pos -=1)
  {
    servo.write(pos);
    delay(10);
    
  }
    delay(2000);
    if(digitalRead(laser_din)==LOW)
    {exit(0);}
  }
}
}
////  if(digitalRead(laser_din)==HIGH) //laser on and checking 
////  {
//    servo.write(0);
//    delay(5);
//    
// 
//     if(digitalRead(laser_din)==HIGH) //laser on and checking 
//   { exit(0);}
//   
//     servo.write(180);
//     delay(5);
//      count=count+1;
//  }
//}


void setup() 
{
servo.attach(9);
servo.write(0);
pinMode(laser_din,INPUT);
Serial.begin(9600);
Serial.println("Enter number of pills");
Dispense(2);
}

void loop()
{
 Dispense(2);

}


